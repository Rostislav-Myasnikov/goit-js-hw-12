{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '52265753-7181a70cf6dcebc2c39de477c';\nconst END_POINT = '/api/';\nconst PER_PAGE = 15;\n\naxios.defaults.baseURL = 'https://pixabay.com';\n\nexport async function getImagesByQuery(query, page = 1) {\n  const response = await axios.get(END_POINT, {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: PER_PAGE,\n    },\n  });\n\n  return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox = null;\n\nexport function createGallery(images) {\n  const listEl = document.querySelector('.gallery');\n\n  const markup = images\n    .map(\n      img => `<li class=\"gallery-item\">\n         <div><a href=\"${img.largeImageURL}\">\n         <img class=\"gallery-img\" src=\"${img.webformatURL}\" alt=\"${img.tags}\" />\n         </a>\n         <div class=\"img-info\">\n          <div class=\"info-block\"><p>Likes</p><p>${img.likes}</p></div>\n          <div class=\"info-block\"><p>Views</p><p>${img.views}</p></div>\n          <div class=\"info-block\"><p>Comments</p><p>${img.comments}</p></div>\n          <div class=\"info-block\"><p>Downloads</p><p>${img.downloads}</p></div>\n        </div>\n      </div>\n      </li>`\n    )\n    .join('');\n\n  listEl.insertAdjacentHTML('beforeend', markup);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a');\n  } else {\n    lightbox.refresh();\n  }\n}\n\nexport function clearGallery() {\n  const listEl = document.querySelector('.gallery');\n  listEl.innerHTML = '';\n}\n\nexport function showLoader() {\n  const loader = document.querySelector('.loader');\n  loader.style.display = 'block';\n}\n\nexport function hideLoader() {\n  const loader = document.querySelector('.loader');\n  loader.style.display = 'none';\n}\n\nexport function showLoadMoreButton() {\n  const moreBtn = document.querySelector('.moreBtn');\n  moreBtn.style.display = 'block';\n}\n\nexport function hideLoadMoreButton() {\n  const moreBtn = document.querySelector('.moreBtn');\n  moreBtn.style.display = 'none';\n}\n\nexport function scrollGallery() {\n  const firstCard = document.querySelector('.gallery-item');\n\n  if (firstCard) {\n    const cardHeight = firstCard.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n","import { getImagesByQuery } from './js/pixabay-api.js';\nimport {\n  createGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  scrollGallery,\n  clearGallery,\n} from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst formEl = document.querySelector('form');\nconst moreBtn = document.querySelector('.moreBtn');\n\nlet currentQuery = '';\nlet page = 1;\nconst PER_PAGE = 15;\n\nformEl.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  const query = e.currentTarget.elements['search-text'].value.trim();\n  if (!query){ \n      iziToast.error({\n    title: 'error',\n    message: 'Please enter a word to search for.',\n    position: 'topRight',\n  });\n    return;}\n\n  currentQuery = query;\n  page = 1;\n  clearGallery();\n  hideLoadMoreButton();\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(currentQuery, page);\n\n    if (data.hits.length === 0) {\n      iziToast.show({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        color: 'red',\n      });\n      return;\n    }\n\n    createGallery(data.hits);\n\n    if (data.totalHits > PER_PAGE) {\n      showLoadMoreButton();\n    } else {iziToast.info({\n  title: 'End of Results',\n  message: \"We're sorry, but you've reached the end of search results.\",\n  position: 'topRight',\n});\n}\n  } catch (error) {\n    console.error('error:', error);\n    iziToast.error({\n      message: `We're sorry, but you've reached the end of search results.`,\n      position: 'topRight',\n      color: 'red',\n    });\n  } finally {\n    hideLoader();\n  }\n});\n\nmoreBtn.addEventListener('click', async () => {\n  page += 1;\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(currentQuery, page);\n    createGallery(data.hits);\n\n    scrollGallery();\n\n    if (page * PER_PAGE >= data.totalHits) {\n      hideLoadMoreButton();\n      iziToast.info({\n  title: 'End of Results',\n  message: \"We're sorry, but you've reached the end of search results.\",\n  position: 'topRight',\n});\n\n    }\n  } catch (error) {\n    console.error('Load more error:', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to load more images.',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n});\n"],"names":["API_KEY","END_POINT","PER_PAGE","axios","getImagesByQuery","query","page","lightbox","createGallery","images","listEl","markup","img","SimpleLightbox","clearGallery","showLoader","loader","hideLoader","showLoadMoreButton","moreBtn","hideLoadMoreButton","scrollGallery","firstCard","cardHeight","formEl","currentQuery","iziToast","data","error"],"mappings":"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"}